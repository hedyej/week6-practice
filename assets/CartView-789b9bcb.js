import{_ as V,m as v,e as g,r as u,o as m,c as f,f as e,F as p,g as y,h as E,w as k,i as C,t as d,d as a,n as c,j as x,v as U}from"./index-e9950759.js";import{c as _}from"./cartStore-3c1576bc.js";const{VITE_BASE_URL:w,VITE_API_PATH:A}={VITE_BASE_URL:"https://vue3-course-api.hexschool.io/",VITE_API_PATH:"duej123456",BASE_URL:"/week6-practice/",MODE:"production",DEV:!1,PROD:!0},S={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{...v(_,["carts"])},methods:{...g(_,["getCart","deleteCart"]),submitOrder(){this.$http.post(`${w}v2/api/${A}/order`,{data:this.form}).then(()=>{alert("已送出訂單"),this.getCart(),this.$refs.form.resetForm()}).catch(r=>console.log(r))}},mounted(){this.getCart()}},B={class:"table"},F=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"名稱"),e("th",{scope:"col"},"圖片"),e("th",{scope:"col"},"價錢"),e("th",{scope:"col"},"數量"),e("th",{scope:"col"},"小計"),e("th",{scope:"col"},"操作")])],-1),T=["src"],I=["onClick"],q={class:"my-5 row justify-content-center"},D={class:"mb-3"},P=e("label",{for:"email",class:"form-label"},"Email",-1),j={class:"mb-3"},L=e("label",{for:"name",class:"form-label"},"收件人姓名",-1),M={class:"mb-3"},O=e("label",{for:"tel",class:"form-label"},"收件人電話",-1),R={class:"mb-3"},N=e("label",{for:"address",class:"form-label"},"收件人地址",-1),H={class:"mb-3"},z=e("label",{for:"message",class:"form-label"},"留言",-1),G=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-primary"},"送出訂單")],-1);function J(r,t,K,Q,l,b){const n=u("VField"),i=u("ErrorMessage"),h=u("VForm");return m(),f(p,null,[e("table",B,[F,e("tbody",null,[(m(!0),f(p,null,y(r.carts,s=>(m(),f("tr",{key:s.id},[e("td",null,d(s.product.title),1),e("td",null,[e("img",{src:s.product.imageUrl,height:"200",width:"200",class:"object-fit-cover"},null,8,T)]),e("td",null,d(s.product.price),1),e("td",null,d(s.qty),1),e("td",null,d(s.total),1),e("td",null,[e("button",{type:"button",class:"btn btn-outline-danger",onClick:o=>r.deleteCart(s.id)},"刪除",8,I)])]))),128))])]),e("div",q,[this.carts.length?(m(),E(h,{key:0,ref:"form",class:"col-md-6",onSubmit:b.submitOrder},{default:k(({errors:s})=>[e("div",D,[P,a(n,{id:"email",name:"email",type:"email",class:c(["form-control",{"is-invalid":s.email}]),rules:"email|required",modelValue:l.form.user.email,"onUpdate:modelValue":t[0]||(t[0]=o=>l.form.user.email=o)},null,8,["class","modelValue"]),a(i,{name:"email",class:"invalid-feedback"})]),e("div",j,[L,a(n,{id:"name",name:"姓名",type:"text",class:c(["form-control",{"is-invalid":s.姓名}]),rules:"required",modelValue:l.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=o=>l.form.user.name=o)},null,8,["class","modelValue"]),a(i,{name:"姓名",class:"invalid-feedback"})]),e("div",M,[O,a(n,{id:"tel",name:"電話",type:"text",class:c(["form-control",{"is-invalid":s.電話}]),rules:"required",modelValue:l.form.user.tel,"onUpdate:modelValue":t[2]||(t[2]=o=>l.form.user.tel=o)},null,8,["class","modelValue"]),a(i,{name:"電話",class:"invalid-feedback"})]),e("div",R,[N,a(n,{id:"address",name:"地址",type:"text",class:c(["form-control",{"is-invalid":s.地址}]),rules:"required",modelValue:l.form.user.address,"onUpdate:modelValue":t[3]||(t[3]=o=>l.form.user.address=o)},null,8,["class","modelValue"]),a(i,{name:"地址",class:"invalid-feedback"})]),e("div",H,[z,x(e("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[4]||(t[4]=o=>l.form.message=o)},null,512),[[U,l.form.message]])]),G]),_:1},8,["onSubmit"])):C("",!0)])],64)}const Y=V(S,[["render",J]]);export{Y as default};
